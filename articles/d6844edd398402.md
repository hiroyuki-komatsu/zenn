---
title: "2020 å¹´ä»¥é™ã® Mozc ã«å¯¾ã™ã‚‹ä¸»ãªå¤‰æ›´"
emoji: "ğŸŸ "
type: "tech"
topics:
  - "linux"
  - "ime"
  - "mozc"
published: true
published_at: "2021-10-10 00:13"
---

åˆç¨¿: 2021-10-10

2020 å¹´ä»¥é™ã® [Mozc](https://github.com/google/mozc) ã«å¯¾ã™ã‚‹ä¸»ãªå¤‰æ›´ã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚„ã‚³ãƒŸãƒƒãƒˆãƒ­ã‚°ã€ Issues ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚’ã¾ã¨ã‚ãŸã ã‘ã§æ–°ã—ã„æƒ…å ±ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚æŠœã‘ã¦ã„ã‚‹ã‚‚ã®ãŒã‚ã‚Œã°å¾Œã§è¿½è¨˜ã—ã¾ã™ã€‚

Mozc ã®å•é¡Œã®å ±å‘Šã‚„è¦æœ›ç­‰ã¯ã€GitHub ã® Issues ã‚„ Discussions ã¸ãŠé¡˜ã„ã—ã¾ã™ã€‚

æ¬¡å›: [2021å¹´10æœˆä»¥é™ã® Mozc ã«å¯¾ã™ã‚‹ä¸»ãªå¤‰æ›´](https://zenn.dev/komatsuh/articles/9821ea8be015f0)



# ãƒ“ãƒ«ãƒ‰é–¢é€£


## Python2 ã‹ã‚‰ Python3 ã¸ã®ç§»è¡Œ

* Python3 ã¸ç§»è¡Œæ¸ˆã¿

## GYP ã‹ã‚‰ Bazel ã¸ã®ç§»è¡Œ

* ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã‚’ [GYP](https://gyp.gsrc.io/) ã‹ã‚‰ [Bazel](https://bazel.build/) ã¸ã®ç§»è¡ŒãŒé€²è¡Œä¸­
* (Make ã¨åŒã˜ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ãƒ„ãƒ¼ãƒ«)

## Linux ãƒ“ãƒ«ãƒ‰

* GYP ã‹ã‚‰ Bazel ã¸ã®ç§»è¡Œå®Œäº†
* GYP ã¯ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰ã¸
* æ–°æ©Ÿèƒ½ã¯ Bazel ã®ã¿ã§ã®å¯¾å¿œ


## macOS ãƒ“ãƒ«ãƒ‰

* Bazel ã¸ç§»è¡Œä¸­
* GYP ãŒãƒ¡ã‚¤ãƒ³ã®ãƒ“ãƒ«ãƒ‰æ–¹æ³•ã®ã¾ã¾
* Bazel ã§ã®ãƒ“ãƒ«ãƒ‰ã‚‚ã™ã§ã«å¯èƒ½ (experimental)


## Windows ãƒ“ãƒ«ãƒ‰

* ã¾ã  GYP ãŒãƒ¡ã‚¤ãƒ³ã®ãƒ“ãƒ«ãƒ‰æ–¹æ³•
* GYP ã«ãƒ‘ãƒƒãƒã‚’å½“ã¦ã‚‹å¿…è¦ã‚ã‚Š
    * [docs/build_mozc_in_windows.md#apply-a-patch-to-gyp](https://github.com/google/mozc/blob/master/docs/build_mozc_in_windows.md#apply-a-patch-to-gyp) 


## Android ãƒ“ãƒ«ãƒ‰

* GYP ã‹ã‚‰ Bazel ã¸ã®ç§»è¡Œ
* Bazel ã®ã¿ã®å¯¾å¿œ
* å¤‰æ›ã‚¨ãƒ³ã‚¸ãƒ³ (C++) ã®ã¿ã®å¯¾å¿œ
* ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (Java) ã®ã‚³ãƒ¼ãƒ‰ã¯ [tag:2018-02-26](https://github.com/google/mozc/commits/2018-02-26) ã‹ã‚‰å‚ç…§å¯èƒ½


## Bazel ã®ã¿å¯¾å¿œã®æ–°æ©Ÿèƒ½

* è¿½åŠ è¾æ›¸
* éƒµä¾¿ç•ªå·å¤‰æ›
* Qt ãƒ™ãƒ¼ã‚¹ã®å€™è£œã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ (Ibus ç”¨)
* ã‚¢ã‚¤ã‚³ãƒ³ç”»åƒ


## ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«ã®æ›´æ–°

* [Google C++ Style Guide](https://google.github.io/styleguide/cppguide.html) ã«æº–ã˜ã‚‹
* C++17 ã¾ã§ã‚’æ¡ç”¨ 
    * ãŸã ã—ã€MS Visual Studio 2017 ã§ã‚‚å¯¾å¿œã—ã¦ã„ã‚‹ã“ã¨
    * ãƒ©ãƒ ãƒ€é–¢æ•° / å³è¾ºå€¤å‚ç…§ / é–¢æ•°ã®default ãŠã‚ˆã³ delete ãªã©
* [Abseil](https://abseil.io/) ã®æ¡ç”¨
    * Status / hash / string_view / æ–‡å­—åˆ—æ“ä½œ / æ™‚é–“ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã©
* Python 3.5 ä»¥é™ãŒå¯¾è±¡
    * f-string ã¯ä½¿ã‚ãªã„ (3.6 ã‹ã‚‰)
    * subprocess ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ encoding ã¯ä½¿ã‚ãªã„ (3.6 ã‹ã‚‰)


# æ–°æ©Ÿèƒ½ãƒ»ãƒã‚°ä¿®æ­£


## è¿½åŠ è¾æ›¸

* ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å—ã‘å…¥ã‚ŒãŒå¯èƒ½ãªè¿½åŠ ãƒ‡ãƒ¼ã‚¿ (Bazel ãƒ“ãƒ«ãƒ‰ã®ã¿)
* [src/data/oss/aux_dictionary.tsv](https://github.com/google/mozc/blob/master/src/data/oss/aux_dictionary.tsv)
* [commit/7500b9bfceeec49329d82a018d5571f8a80b1e16](https://github.com/google/mozc/commit/7500b9bfceeec49329d82a018d5571f8a80b1e16)


## éƒµä¾¿ç•ªå·å¤‰æ›

* éƒµä¾¿ç•ªå·ã‹ã‚‰ã®å¤‰æ› (Bazel ãƒ“ãƒ«ãƒ‰ã®ã¿)
* [commit/2d434cb612b680cdc1bdaf4b036be606ef3856f0](https://github.com/google/mozc/commit/2d434cb612b680cdc1bdaf4b036be606ef3856f0)


## Qt ãƒ™ãƒ¼ã‚¹ã®å€™è£œã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ (Ibus ç”¨)

* Gtk2 ã‹ã‚‰ã®ç§»è¡Œ (Bazel ãƒ“ãƒ«ãƒ‰ã®ã¿)
* [issues/492](https://github.com/google/mozc/issues/492)
* ç’°å¢ƒã«ã‚ˆã£ã¦ã¯ CPU æ¶ˆè²»ãŒ 100% ã«ãªã‚‹å•é¡ŒãŒå ±å‘Šã•ã‚Œã¦ã„ã‚‹ï¼ˆèª¿æŸ»ä¸­ï¼‰
    * [issues/520](https://github.com/google/mozc/issues/520)


## ã‚¢ã‚¤ã‚³ãƒ³ç”»åƒ

* SVG ã«ã‚ˆã‚‹ãƒ„ãƒ¼ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ç­‰ã®ç”Ÿæˆ (Bazel ãƒ“ãƒ«ãƒ‰ã®ã¿)
* [issues/498](https://github.com/google/mozc/issues/498)


## XDG ã¸ã®æº–æ‹ 

* ã‚³ãƒ³ãƒ•ã‚£ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ ~/.mozc ã‹ã‚‰ ~/.config/mozc ã¸ç§»è¡Œ
* [issues/474](https://github.com/google/mozc/issues/474)


## æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

* æ—¥ä»˜å¤‰æ›ï¼ˆä¾‹: ãã‚‡ã† â†’ 2021-10-01ï¼‰ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ã«
    * "{YEAR}.{MONTH}.{DATE}" ã®ã‚ˆã†ã«è¡¨ç¾ã§ãã‚‹
* å®Ÿé¨“çš„æ©Ÿèƒ½ãªã®ã§ã€å‰Šé™¤ãªã„ã—ä»•æ§˜ã®å¤‰æ›´ãŒèµ·ã“ã‚Šå¾—ã‚‹
* [docs/configurations.md#date-format-converted-from-ãã‚‡ã†](https://github.com/google/mozc/blob/master/docs/configurations.md#date-format-converted-from-%E3%81%8D%E3%82%87%E3%81%86)


## Ibus ã§ã®å…¥åŠ›ãƒ¢ãƒ¼ãƒ‰ãƒ»ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

* åˆæœŸå…¥åŠ›ãƒ¢ãƒ¼ãƒ‰ã‚’ã²ã‚‰ãŒãªã«å¤‰æ›´å¯èƒ½
* ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’ JIS é…åˆ—ç­‰ã«å›ºå®šå¯èƒ½
* ~/config/.mozc/ibus_config.textproto ã§ç®¡ç†ã•ã‚Œã‚‹
* [docs/configurations.md#ibus](https://github.com/google/mozc/blob/master/docs/configurations.md#ibus)


## åŒæ™‚å…¥åŠ›ï¼ˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå…¥åŠ›ï¼‰è¨­å®š

* ã€Œk â†’  ã„ã€ã€Œd â†’ã‹ã€ã€Œkd åŒæ™‚ â†’ ã‚Œã€ã¨ã„ã£ãŸãƒ­ãƒ¼ãƒå­—è¨­å®šãŒå¯èƒ½
* [issues/512](https://github.com/google/mozc/issues/512) 


## ä»˜å±æ©Ÿèƒ½ã®å‰Šé™¤

* æ‰‹æ›¸ãæ–‡å­—å…¥åŠ›ãƒ„ãƒ¼ãƒ«ãƒ»æ–‡å­—å…¥åŠ›ãƒ‘ãƒ¬ãƒƒãƒˆã®å‰Šé™¤
* ã‚³ãƒ¼ãƒ‰ã¯ [tag:2018-02-26](https://github.com/google/mozc/commits/2018-02-26) ã‹ã‚‰å‚ç…§å¯èƒ½


## Anki ã§è½ã¡ã‚‹ (Ibus)

* ä¿®æ­£æ¸ˆã¿ã€‚è¦å®šå¤–ã®å€¤ãŒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰é€ä¿¡ã•ã‚Œã¦ã„ãŸã€‚
* [issues/510](https://github.com/google/mozc/issues/510)


## Chrome ã§æœ€åˆã®æ–‡å­—ãŒå…¥åŠ›ã•ã‚Œãªã„

* ã“ã‚Œã¯ Mozc ã®å•é¡Œã§ã¯ãªã„ã“ã¨ãŒã»ã¨ã‚“ã©
* fcitx ã‚’ä½¿ã£ã¦ã„ã‚‹ãªã‚‰ã€fcitx5 ã«ã™ã‚‹ã¨è§£æ±ºã™ã‚‹ã‚±ãƒ¼ã‚¹ãŒå¤šã„


# ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ


## ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆå¯èƒ½ãªãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

ä¸‹è¨˜ã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å¯¾ã—ã¦ã¯ã€ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒå—ã‘å…¥ã‚Œå¯èƒ½ ([å‚ç…§](https://github.com/google/mozc/blob/master/CONTRIBUTING.md))

* [ãƒˆãƒƒãƒ—ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª](https://github.com/google/mozc/tree/master/) ç›´ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«
* [docker/](https://github.com/google/mozc/tree/master/docker/)
* [docs/](https://github.com/google/mozc/tree/master/docs/)
* [src/.bazelrc](https://github.com/google/mozc/tree/master/src/.bazelrc)
* [src/BUILD.(library).bazel](https://github.com/google/mozc/tree/master/src/)
* [src/data/oss/](https://github.com/google/mozc/tree/master/src/data/oss/)
* [src/data/test/quality_regression_test/](https://github.com/google/mozc/tree/master/src/data/test/quality_regression_test/)
* [src/unix/emacs/mozc.el](https://github.com/google/mozc/tree/master/src/unix/emacs/mozc.el)
* [src/WORKSPACE.bazel](https://github.com/google/mozc/tree/master/src/WORKSPAE.bazel)

ç®¡ç†ä¸Šã®ç†ç”±ã«ã‚ˆã‚Šã€GYP ã§å‚ç…§ã—ã¦ã„ãªã„ãƒ•ã‚¡ã‚¤ãƒ«ãŒä¸­å¿ƒ


## å¤‰æ›ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿

* å¤‰æ›ã§ããªã„æ–‡å­—åˆ—ã¯ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¨ã—ã¦ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆå¯èƒ½
    * [src/data/test/quality_regression_test/oss.tsv](https://github.com/google/mozc/blob/master/src/data/test/quality_regression_test/oss.tsv)
    * [issues/521#issuecomment-918254477](https://github.com/google/mozc/issues/521#issuecomment-918254477)


## è¿½åŠ è¾æ›¸



* è¾æ›¸ã«ãªã„å˜èªã¯ aux_dictionary.txt ã¸ã®è¿½åŠ ã¨ã—ã¦ã€ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆå¯èƒ½
    * [src/data/oss/aux_dictionary.tsv](https://github.com/google/mozc/blob/master/src/data/oss/aux_dictionary.tsv)
    * [commit/7500b9bfceeec49329d82a018d5571f8a80b1e16](https://github.com/google/mozc/commit/7500b9bfceeec49329d82a018d5571f8a80b1e16)